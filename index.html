<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Curricular - Prevención de Riesgos</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #d6f5d6;
      margin: 0;
      padding: 40px;
    }

    h1 {
      text-align: center;
      color: #2e7d32;
      margin-bottom: 30px;
    }

    .grid {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .semester {
      background-color: #c8e6c9;
      border: 2px solid #81c784;
      border-radius: 20px;
      padding: 20px;
      width: 200px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .semester h3 {
      text-align: center;
      font-weight: bold;
      font-size: 1.2em;
      color: #1b5e20;
      margin-bottom: 15px;
    }

    .subject {
      margin: 8px 0;
      padding: 10px;
      background-color: #e0f2f1;
      border: 2px solid #80cbc4;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      color: #004d40;
      text-align: center;
    }

    .subject:hover {
      background-color: #b2dfdb;
    }

    .locked {
      background-color: #e0e0e0 !important;
      border: 2px solid #9e9e9e !important;
      color: #616161 !important;
      pointer-events: none;
    }

    .completed {
      background-color: #cce4f6 !important;
      border: 2px solid #5393c7 !important;
      color: #0d47a1 !important;
      text-decoration: line-through;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Ingeniería en Prevención de Riesgos</h1>
  <div class="grid" id="curriculum"></div>

  <script>
    const curriculum = {
      1: [
        { name: "Matemáticas" },
        { name: "Taller Integrado ABP" },
        { name: "Salud Ocupacional", unlocks: ["Protocolos MINSAL 1"] },
        { name: "Fundamentos de Seg. Industrial", unlocks: ["Seguridad Industrial 1"] },
        { name: "Química", unlocks: ["Riesgos en la Ind.Qca."] },
        { name: "Comunicación y Aprendizaje" },
        { name: "Herramientas de Ofimáticas" }
      ],
      2: [
        { name: "Matemática Aplicada" },
        { name: "Protocolos MINSAL 1", locked: true, unlocks: ["Lab. Higiene Industrial 1", "Ergonomía 1"] },
        { name: "Seguridad Industrial 1", locked: true, unlocks: ["Seguridad Industrial 2"] },
        { name: "Riesgos en la Ind.Qca.", locked: true, unlocks: ["Emergencias en la Industria"] },
        { name: "Inglés 1" },
        { name: "Desarrollo Personal" }
      ],
      3: [
        { name: "Física 1" },
        { name: "Lab. Higiene Industrial 1", locked: true },
        { name: "Ergonomía 1", locked: true },
        { name: "Seguridad Industrial 2", locked: true, unlocks: ["Riesgos Industriales"] },
        { name: "Emergencias en la Industria", locked: true, unlocks: ["Emergencias Civiles"] },
        { name: "Inglés 2" },
        { name: "Cultura y Sociedad" }
      ],
      4: [
        { name: "Protocolos MINSAL 2", locked: true },
        { name: "Lab. Higiene Industrial 2", locked: true },
        { name: "Ergonomía 2", locked: true },
        { name: "Riesgos Industriales", locked: true },
        { name: "Emergencias Civiles", locked: true },
        { name: "Emprendimiento y Empleabilidad" },
        { name: "Sustentabilidad y Medioambiente" }
      ],
      5: [
        { name: "Procesos Productivos 1", unlocks: ["Procesos Productivos 2"] },
        { name: "Leyes Laborales 1", unlocks: ["Leyes Laborales 2"] },
        { name: "Física 2" },
        { name: "Elaboración de Infor. Técnicos" },
        { name: "Leyes Ambientales", unlocks: ["Energías Renovables"] },
        { name: "Inglés 3" }
      ],
      6: [
        { name: "Procesos Productivos 2", locked: true, unlocks: ["Interpretación de Planos"] },
        { name: "Leyes Laborales 2", locked: true },
        { name: "Laboratorio de EPP" },
        { name: "Estadística y Probabilidades" },
        { name: "Energías Renovables", locked: true, unlocks: ["Control de Riesgos Ambientales"] },
        { name: "Inglés 4" },
        { name: "Habilidades Comunicativas" }
      ],
      7: [
        { name: "Interpretación de Planos", locked: true },
        { name: "Sistemas de Gestión SSO", unlocks: ["Sistemas de Gestión Integrado"] },
        { name: "Ev. Proyectos de Prevención" },
        { name: "Plan Experto Trabajo en Terreno" },
        { name: "Control de Riesgos Ambientales", locked: true, unlocks: ["Sistemas de Gestión Ambiental"] }
      ],
      8: [
        { name: "Sistemas de Gestión Integrado", locked: true },
        { name: "Proyecto Integrado Final" },
        { name: "Gestión Hab. Directivas" },
        { name: "Sistemas de Gestión Ambiental", locked: true },
        { name: "Práctica Integrada Competencias" }
      ]
    };

    const state = {};

    function createSubject(sem, subject) {
      const div = document.createElement('div');
      div.className = 'subject';
      div.textContent = subject.name;

      if (subject.locked || sem !== 1) {
        div.classList.add('locked');
        state[subject.name] = 'locked';
      } else {
        state[subject.name] = 'unlocked';
      }

      div.addEventListener('click', () => {
        if (div.classList.contains('locked') || div.classList.contains('completed')) return;
        div.classList.add('completed');
        state[subject.name] = 'completed';

        (subject.unlocks || []).forEach(unlock => {
          const unlocked = document.querySelectorAll('.subject');
          unlocked.forEach(sub => {
            if (sub.textContent === unlock && state[unlock] === 'locked') {
              sub.classList.remove('locked');
              state[unlock] = 'unlocked';
            }
          });
        });
      });

      return div;
    }

    const grid = document.getElementById('curriculum');
    for (let sem = 1; sem <= 8; sem++) {
      const column = document.createElement('div');
      column.className = 'semester';

      const title = document.createElement('h3');
      title.textContent = `${sem}º Semestre`;
      column.appendChild(title);

      curriculum[sem].forEach(subject => {
        const subjectDiv = createSubject(sem, subject);
        column.appendChild(subjectDiv);
      });

      grid.appendChild(column);
    }
  </script>
</body>
</html>
